<div class="mb-3">
  <app-monster-select></app-monster-select>
</div>

<section class="animated-grid">
  <div class="gridSpot">
    <p class="text-success floating-text">{{ this.playerDamage }}</p>
    <div class="mb-1"></div>
    <div style="border-top: 2px solid red;" class="col-12 monster-area row">
      <div class="col-12">
        <div class="mb-3 text-center">
          <strong>
            {{ this.monster?.name || '?' }} (Lvl:
            {{ this.monster?.level || '?' }})
          </strong>
        </div>
      </div>
      <div class="col-6 text-center">
        <progressbar
          style="border-radius: 20px;"
          class="progress-striped active"
          [max]="this.monster?.hpMax"
          [value]="this.monster?.hp"
          type="danger"
        ></progressbar>
        {{ this.monster?.hp || '?' }} / {{ this.monster?.hpMax || '?' }} HP
      </div>
      <div class="col-6 text-center">
        <div class="bar">
          <progressbar
            style="border-radius: 20px;"
            class="progress-striped active in"
            type="warning"
            animate="true"
          ></progressbar>
        </div>
        <strong>Attack Interval: 4.00s</strong>
      </div>
      <div class="col-3">
        <app-monster-stats
          [monster]="this.monster?.damage"
          stat="dmg"
          description="Maximum hit"
        ></app-monster-stats>
        <div class="mt-3">
          <img
            src="./assets/icons/chance.png"
            alt="ChanceToHit"
            class="icons"
            tooltip="Enemies Chance to land a hit"
          />
          <strong>{{ this.calculateMonsterChancetoHit() || '?' }}%</strong>
        </div>
        <app-monster-stats
          [monster]="this.monster?.armour"
          stat="armour"
          description="Damage reduction"
        ></app-monster-stats>
        <app-monster-stats
          [monster]="this.monster?.accuracy"
          stat="accuracy"
          description="Chance to hit"
        ></app-monster-stats>
        <app-monster-stats
          [monster]="this.monster?.evasion"
          stat="evasion"
          description="Chance to avoid an attack"
        ></app-monster-stats>
        <app-monster-stats
          [monster]="this.monster?.gold"
          stat="gold"
          description="Gold reward"
        ></app-monster-stats>
        <app-monster-stats
          [monster]="this.monster?.xp"
          stat="xp"
          description="XP reward"
        ></app-monster-stats>
      </div>
      <div class="col-9">
        <img
          src="./assets/monsters/{{ this.monster?.name }}.svg"
          alt="?"
          class="monsterImage"
        />
      </div>
      <div class="col-12 mt-3">
        <div class="loot-container">
          <button
            class="btn btn-success"
            style="right: 40px; position: absolute; border-radius: 5px;"
            (click)="collectItems()"
          >
            Collect Loot
          </button>
          <div style="position: absolute;">
            <span style="font-weight: 700;" class="ml-3">
              Loot to collect ({{ lootContainer.length || 0 }} / 10)
            </span>
          </div>
          <div
            class="mt-3"
            style="display: inline-flex; float: left;"
            *ngFor="let items of lootContainer"
          >
            <ng-template #itemTemplate>
              <div>
                <span style="font-size: 14px; color: gold;">
                  {{ items.name }}
                </span>
                <div *ngIf="items.damage">Damage {{ items.damage }}</div>
                <div *ngIf="items.armour">Armour {{ items.armour }}</div>
                <div *ngIf="items.evasion">Evasion {{ items.evasion }}</div>
                <div *ngIf="items.accuracy">Accuracy {{ items.accuracy }}</div>
                <div *ngIf="items.hpMax">Hp {{ items.hpMax }}</div>
                <div class="text-warning" *ngIf="items.value">
                  Value {{ items.value }}
                </div>
              </div>
            </ng-template>
            <img
              *ngIf="items.name"
              src="../../../assets/items/{{ items.name }}.png"
              class="equipment"
              alt="?"
              [tooltip]="itemTemplate"
            />
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="gridSpot">
    <p class="text-danger mb-1 floating-text">
      {{ this.monsterDamage }}
    </p>
    <div class="mb-1"></div>
    <div style="border-top: 2px solid green;" class="col-12 monster-area row">
      <div class="col-12">
        <div class="text-center mb-3">
          <strong>
            {{ this.player.characterName }} (Lvl: {{ this.player.level }})
          </strong>
        </div>
      </div>
      <div class="col-6 text-center">
        <progressbar
          style="border-radius: 20px;"
          class="progress-striped"
          [max]="this.player.hpMax + this.playerBonus.hpMax"
          [value]="this.player.hpCurrent"
          type="success"
        ></progressbar>
        {{ this.player.hpCurrent }} /
        {{ this.player.hpMax + this.playerBonus.hpMax }} HP
      </div>
      <div class="col-6 text-center">
        <div class="bar">
          <progressbar
            style="border-radius: 20px;"
            class="progress-striped active in"
            type="warning"
            animate="true"
          ></progressbar>
        </div>
        <strong>Attack Interval: 4.00s</strong>
      </div>
      <div class="col-6">
        <div class="mt-3">
          <img
            src="./assets/icons/dmg.png"
            alt="{{ this.player.damage }}"
            class="icons"
            tooltip="Maximum possible hit you could deal"
          />
          <strong>
            {{ this.player.damage + this.playerBonus.damage }}
          </strong>
        </div>
        <div class="mt-3">
          <img
            src="./assets/icons/armour.png"
            alt="{{ this.player.armour }}"
            class="icons"
            tooltip="Reduces the amount of damage taken"
          />
          <strong>
            {{ this.player.armour + this.playerBonus.armour }}
          </strong>
        </div>
        <div class="mt-3">
          <img
            src="./assets/icons/accuracy.png"
            alt="{{ this.player.accuracy }}"
            class="icons"
            tooltip="Attack changes your chance to hit"
          />
          <strong>
            {{ this.player.accuracy + this.playerBonus.accuracy }}
          </strong>
        </div>
        <div class="mt-3">
          <img
            src="./assets/icons/evasion.png"
            alt="{{ this.player.evasion }}"
            class="icons"
            tooltip="Evasion allows you to dodge attacks completely"
          />
          <strong>
            {{ this.player.evasion + this.playerBonus.evasion }}
          </strong>
        </div>
        <div class="mt-3">
          <img
            src="./assets/icons/gold.png"
            alt="{{ this.player.gold }}"
            class="icons"
            tooltip="Your total amount of gold"
          />
          <strong>{{ this.player.gold }}</strong>
        </div>
        <div class="mt-3">
          <img
            src="./assets/icons/xp.png"
            alt="{{ this.player.xpCurrent }}"
            class="icons"
            tooltip="XP is required to level up and grow stronger"
          />
          <strong>{{ this.player.xpCurrent }}/{{ this.player.xpMax }}</strong>
        </div>
        <div class="mt-3">
          <img
            src="./assets/icons/chance.png"
            alt="ChanceToHit"
            class="icons"
            tooltip="Your chance to hit the enemy"
          />
          <strong>{{ this.calculatePlayerChanceToHit() }}%</strong>
        </div>
      </div>
      <div class="col-6">
        <div class="mt-3 ml-5">
          <app-equipment-slot [player]="player"></app-equipment-slot>
        </div>
      </div>
    </div>
  </div>
  <div class="gridSpot"></div>
</section>
